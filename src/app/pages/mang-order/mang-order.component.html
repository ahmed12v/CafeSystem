<section class="container w-75">
  <form [formGroup]="drinksForm" (ngSubmit)="TakeOrder()">
    <div>
      <label for="">Employee Name</label>
      <select
        class="form-select p-3"
        formControlName="employeeName"
        id="inputGroupSelect02"
      >
        <option selected>Choose name...</option>
        @for (item of empList; track $index) {
        <option value="{{ item.name }}">{{ item.name }}</option>
        }
      </select>
      <label>Add Drinks</label>
      <button
        class="btn btn-success mt-2 d-block"
        (click)="addDrinks()"
        type="button"
      >
        <i class="fa-solid fa-circle-plus"></i>
      </button>

      <div class="container mb-3" formArrayName="drinks">
        @for (item of drinks.controls; track item; let i = $index) {
        <div class="row mb-2" [formGroupName]="i">
          <div class="col-lg-6">
            <div class="input-group mb-3">
              <select class="form-select p-3" formControlName="drinkId">
                <option selected>Choose drink...</option>
                @for (item of drinklist; track $index) {
                <option [value]="item._id">{{ item.name }}</option>
                }
              </select>
            </div>
            <div class="col-lg-5">
              <div class="form-floating mb-3">
                <input
                  type="number"
                  formControlName="quantity"
                  class="form-control"
                  id="floatingInput"
                  placeholder=""
                />
                <label for="floatingInput">Quantity</label>
              </div>
            </div>

            <div class="col-lg-1">
              <h2>
                <button class="btn btn-success" (click)="removeDrinks(i)">
                  <i class="fa-solid fa-circle-minus"></i>
                </button>
              </h2>
            </div>
          </div>
        </div>
        }
      </div>

      <div class="form-floating mb-3">
        <input
          type="date"
          formControlName="date"
          class="form-control"
          id="floatingInput"
          placeholder=""
        />
        <label for="floatingInput">Date</label>
      </div>
    </div>

    <div class="d-flex justify-content-around align-items-md-center w-100">
      <button class="btn btn-success fs-5 mt-3 mb-3 ps-4 pe-4 b-c">
        @if (spiner) {
        <span> <i class="fa fa-spin fa-spinner"></i> </span>
        } @else {
        <span> send Order </span>
        }
      </button>
    </div>
  </form>
</section>

<!-- Toast Notification -->
<div class="toast-container position-fixed bottom-0 end-0 p-3">
  <div
    class="toast align-items-center text-bg-success border-0"
    role="alert"
    aria-live="assertive"
    aria-atomic="true"
    #successToast
  >
    <div class="d-flex">
      <div class="toast-body">Order placed successfully!</div>
      <button
        type="button"
        class="btn-close btn-close-white me-2 m-auto"
        data-bs-dismiss="toast"
        aria-label="Close"
      ></button>
    </div>
  </div>
</div>
